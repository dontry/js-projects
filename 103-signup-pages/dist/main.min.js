var $box=$("#slide-box"),$slide_bg=$("#slide-bg"),$scale_text=$(".scale_text"),$captcha=$(".captcha-area"),$btn_next=$("#btn-next"),$captcha_img=$(".captcha-img > img"),CAPTCHA_COUNT=3,CLICK_RANGE=8,pid=0,slideboxInit=function(){$(document).off("mousemove"),$box.animate({left:"0px"}),$slide_bg.animate({width:"0px"})},showImg=function(){$scale_text.css("color","#fff").text("请点击图中"),getCaptcha()},reloadImg=function(){do var t=Math.floor(100*Math.random())%CAPTCHA_COUNT+1;while(t==pid);pid=t};getCaptcha=function(){0===pid&&(pid=Math.floor(100*Math.random())%CAPTCHA_COUNT+1);var t,a="assets/captcha0"+pid+".jpg",o="assets/captcha0"+pid+".json";$.getJSON(o).done(function(a){var o=a.count,c=i.data,e=Math.floor(100*Math.random())%o,n=c[e].value;t.x=c[e].x,t.y=c[e].y,$(".captcha-hint").show().text('请点击图中"'+n+'"字')}),$captcha_img.attr("src","assets/captcha1.png"),$(".captcah-reload").on("click",reloadImg),$captcha_img.attr("src",a).on("click",function(a){checkCaptcha(a,t)}),$captcha.show()},checkCaptcha=function(t,a){Math.abs(t.offsetX-a.x)<=CLICK_RANGE&&Math.abs(t.offsetY-a.y)<=CLICK_RANGE?($(this).off("click"),captchaVerified()):(console.log("验证码错误"),reloadImg())},captchaVerified=function(){$captcha.hide(),$(".captcha-hint").text("验证成功"),$btn_next.removeClass("btn-disabled").addClass("btn-enabled")},moveSlidebox=function(){$box.on("mousedown",function(t){var a=t.clientX-this.offsetLeft;$(document).on("mousemove",function(t){var o=t.clientX-a;0>o&&(o=0),o>260&&(o=260,$(document).off("mousemove").off("mouseup"),$box.off("mousedown"),setTimeout(function(){showImg()},100)),$box.css("left",o+"px"),$slide_bg.css("width",o+"px")})}),$(document).on("mouseup",function(){slideboxInit()})},$(document).ready(function(){moveSlidebox()});